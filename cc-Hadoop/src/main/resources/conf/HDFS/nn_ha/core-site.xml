<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!--
### Hadoop HA高可用（QJM） ###
### 前提：配置Zookeeper ###
### NN HA下的Yarn HA高可用：见文件：Yarn/rm_ha/ ###
-->

<!--### 2、HDFS核心配置文件 ###-->

<!--文件位置：/opt/module/hadoop-2.7.7/etc/hadoop/core-site.xml-->
<!--官网位置：https://hadoop.apache.org/docs/r2.7.7/hadoop-project-dist/hadoop-common/core-default.xml-->

<configuration>

    <!--
    准备工作：创建目录：
    mkdir -p ./hadoop-2.7.7/data/namenode
    mkdir -p ./hadoop-2.7.7/data/journalnode
    -->

    <!--配置hadoop存储临时数据的目录，设置到hadoop的安装目录下（Hadoop本地保存数据路径）-->
    <property>
        <name>hadoop.tmp.dir</name>
        <value>/opt/module/hadoop-2.7.7/data/namenode</value>
    </property>

    <!--配置hdfs(分布式文件管理系统)的默认连接路径URI-->
    <property>
        <name>fs.defaultFS</name>
        <value>hdfs://myhdfs</value>
    </property>

    <!--HA配置-->

    <!--指定Zookeeper地址-->
    <property>
        <name>ha.zookeeper.quorum</name>
        <value>bd91:2181,bd92:2181,bd93:2181</value>
    </property>

    <!--设置HDFS-Web-UI用户身份-->
    <property>
        <name>hadoop.http.staticuser.user</name>
        <value>root</value>
    </property>

    <!--配置该root允许通过代理访问的主机节点-->
    <property>
        <name>hadoop.proxyuser.root.hosts</name>
        <value>*</value>
    </property>

    <!--配置该root允许代理的用户所属组-->
    <property>
        <name>hadoop.proxyuser.root.groups</name>
        <value>*</value>
    </property>

    <!--配置该root允许代理的用户-->
    <property>
        <name>hadoop.proxyuser.root.users</name>
        <value>*</value>
    </property>

    <!--对于每个root用户，hosts必须进行配置，而groups和users至少需要配置一个-->

    <!--文件系统垃圾桶保存时间-->
    <property>
        <name>fs.trash.interval</name>
        <value>1440</value>
    </property>

</configuration>
